<ion-header [@headerAnim] class="ion-no-border">
  <ion-toolbar class="custom-toolbar">
    <ion-buttons slot="start">
      <ion-button class="header-button" (click)="goBack()">
        <ion-icon name="arrow-back-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title class="center-title">{{'My account' | translate}}</ion-title>
    <ion-buttons slot="end">
      <ion-button class="header-button notification-button">
        <ion-icon name="notifications-outline"></ion-icon>
        <!-- <span class="notification-badge">{{notificationCount}}</span> -->
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="gradient-background">
  <div class="content-wrapper">
    <!-- Avatar Section -->
    <div class="avatar-container" [@avatarAnim]>
      <div class="avatar-wrapper">
        <div class="avatar-ring">
          <ion-img
            [src]="user?.photo_urls?.url ? user?.photo_urls?.url : 'assets/img/icone-pdf.png'"
            class="avatar-image"
          ></ion-img>
        </div>
        <div class="status-dot"></div>
      </div>
    </div>

    <!-- Greeting -->
    <div class="greeting-section" [@greetingAnim]>
      <p class="greeting-text">
        <span class="greeting-title">{{'Hello' | translate}}</span>
        <span class="greeting-name">{{user?.first_name}} {{user?.last_name}}</span>
      </p>
    </div>

    <!-- Logout Button -->
    <div class="button-container" [@buttonAnim]>
      <ion-button class="logout-button" (click)="logout()">
        <ion-icon name="log-out-outline" slot="start"></ion-icon>
        {{'logout' | translate}}
      </ion-button>
    </div>

    <!-- Divider -->
    <div class="divider"></div>

    <!-- Action Cards -->
    <div class="cards-section" [@cardsAnim]>
      <!-- Documents Card -->
      <ion-card class="action-card" (click)="goDocuments()">
        <div class="card-header">
          <div class="icon-container">
            <ion-icon name="document-text-outline"></ion-icon>
          </div>
          <span class="card-title">{{'Documents' | translate}}</span>
        </div>
        <ion-card-content class="card-content">
          <p class="card-description">{{'View agent documents from the field' | translate}}</p>
        </ion-card-content>
      </ion-card>

      <!-- Vehicle Card -->
      <ion-card
        *ngIf="user?.role != 'supervisor'"
        class="action-card"
        (click)="goVehicles()"
      >
        <div class="card-header">
          <div class="icon-container">
            <ion-icon name="car-outline"></ion-icon>
          </div>
          <span class="card-title">{{'Vehicle' | translate}}</span>
        </div>
        <ion-card-content class="card-content">
          <p class="card-description">{{'Visualize vehicle uses' | translate}}</p>
        </ion-card-content>
      </ion-card>
    </div>

    <!-- Divider -->
    <div class="divider"></div>

    <!-- Profile Section -->
    <div class="profile-title-section" [@profileTitleAnim]>
      <p class="profile-title">
        <span class="profile-title-text">{{'My profile' | translate}}</span>
      </p>
    </div>

    <!-- Profile Card -->
    <ion-card class="profile-card" [@profileCardAnim]>
      <ion-card-content class="profile-card-content">
        <div class="profile-items" [@profileItemsAnim]>
          <!-- First Name -->
          <div class="profile-item">
            <div class="profile-item-icon">
              <ion-icon name="person-outline"></ion-icon>
            </div>
            <div class="profile-item-content">
              <label class="profile-item-label">Nom</label>
              <p class="profile-item-value">{{user?.first_name}}</p>
            </div>
          </div>

          <!-- Last Name -->
          <div class="profile-item">
            <div class="profile-item-icon">
              <ion-icon name="person-outline"></ion-icon>
            </div>
            <div class="profile-item-content">
              <label class="profile-item-label">Prénom</label>
              <p class="profile-item-value">{{user?.last_name}}</p>
            </div>
          </div>

          <!-- Phone -->
          <div class="profile-item">
            <div class="profile-item-icon">
              <ion-icon name="call-outline"></ion-icon>
            </div>
            <div class="profile-item-content">
              <label class="profile-item-label">Téléphone</label>
              <p class="profile-item-value">{{user?.phone}}</p>
            </div>
          </div>

          <!-- Address -->
          <div class="profile-item">
            <div class="profile-item-icon">
              <ion-icon name="location-outline"></ion-icon>
            </div>
            <div class="profile-item-content">
              <label class="profile-item-label">Adresse</label>
              <p class="profile-item-value">{{user?.address}}</p>
            </div>
          </div>
        </div>
      </ion-card-content>
    </ion-card>

    <!-- Divider -->
    <div class="divider"></div>

    <!-- Update Profile Button -->
    <div class="button-container" [@updateButtonAnim]>
      <ion-button class="update-button" (click)="openModal()">
        <ion-icon name="create-outline" slot="start"></ion-icon>
        {{'Update my profile' | translate}}
      </ion-button>
    </div>
  </div>
</ion-content>